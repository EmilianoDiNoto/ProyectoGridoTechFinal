<!-- 
* Copyright 2018 Carlos Eduardo Alfaro Orellana
  https://www.youtube.com/c/CarlosAlfaro007
-->
<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Products</title>
	<link rel="stylesheet" href="css/sweetalert2.css">
	<link rel="stylesheet" href="css/material.min.css">
	<link rel="stylesheet" href="css/material-design-iconic-font.min.css">
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
	<link rel="stylesheet" href="css/main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- SweetAlert2 (una sola versión) -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- Tus otros scripts locales -->
	<script src="js/material.min.js"></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="js/main.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

	<style>
		/* Estilo para centrar el título "Listar productos" */
		.header-well-text {
			text-align: center;
			width: 100%;
		}

		.header-well-text p {
			font-size: 24px;
			margin: 0;
			padding: 20px 0;
		}

		/* Alineación de precios a la derecha */
		.table-responsive td:nth-child(5) {
			/* Columna de precios */
			text-align: right;
		}

		/* Contenedor de la tabla */
		.table-container {
			flex: 2;
			/* Ocupa más espacio que el gráfico */
			min-width: 500px;
			/* Ancho mínimo */
			overflow-x: auto;
			/* Permite scroll horizontal si la tabla es muy ancha */
			padding: 0 20px;
			/* Espaciado interno lateral */
			margin: 0 auto;
			/* Centrar horizontalmente */
		}

		thead {
			background-color: #468bc7;
			/* Verde */
			color: white;
			padding: 10px;
			text-transform: uppercase;
			border: 1px solid #ddd;
		}

		th,
		td {
			padding: 12px 15px;

			border-bottom: 1px solid #e9ecef;
		}

		th {
			color: white;
			font-weight: 600;
			text-transform: uppercase;
			font-size: 0.9em;
		}

		table tbody tr:hover {
			background-color: #bec9d4;
			transition: background-color 0.1s ease;
		}

		td {
			color: #212529;
		}

		.las {
			margin-right: 5px;
			color: #adb5bd;
			cursor: pointer;
		}

		tbody tr:nth-child(even) {
			background-color: #f8f9fa;
		}

		td:last-child {
			width: 15%;
			/* font-weight: bold; */
			text-align: center;

		}

		/* Estilos para modal */
		.modal {
			display: none;
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0, 0, 0, 0.4);
		}

		.modal-content {
			background-color: #fefefe;
			margin: 10% auto;
			padding: 20px;
			border-radius: 8px;
			width: 80%;
			max-width: 500px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}

		.modal-content form {
			display: flex;
			flex-direction: column;
		}

		.modal-content input,
		.modal-content select {
			margin-bottom: 15px;
			padding: 10px;
			border: 1px solid #ced4da;
			border-radius: 4px;
		}

		.modal-close {
			color: #aaa;
			float: right;
			font-size: 28px;
			font-weight: bold;
			cursor: pointer;
		}

		.modal-close:hover {
			color: #333;
		}

		.btn {
			padding: 10px 15px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			margin-right: 10px;
		}

		.btn-primary {
			background-color: #007bff;
			color: white;
		}

		.btn-secondary {
			background-color: #6c757d;
			color: white;
		}

		.action-btn {
			background: none;
			border: none;
			color: #007bff;
			cursor: pointer;
			padding: 5px;
		}

		.action-btn:hover {
			text-decoration: underline;
		}

		.search-container {
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 1rem;
			/* Espacio entre elementos */
			padding: 2rem;
			/* Padding alrededor del contenedor */
			margin: 1rem auto;
			/* Margen arriba y abajo, auto para centrar */
			max-width: 1200px;
			/* Ancho máximo para mantener todo junto */
		}

		#searchInput {
			padding: 0.75rem 1rem;
			border: 1px solid #e2e8f0;
			border-radius: 0.375rem;
			min-width: 300px;
			/* Ancho mínimo del input */
			font-size: 0.875rem;
			transition: border-color 0.2s ease;
		}

		#searchInput:focus {
			outline: none;
			border-color: #4a90e2;
			box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
		}

		#searchType {
			padding: 0.75rem 1rem;
			border: 1px solid #e2e8f0;
			border-radius: 0.375rem;
			min-width: 150px;
			/* Ancho mínimo del select */
			font-size: 0.875rem;
			background-color: white;
			cursor: pointer;
		}

		#addMaterialBtn {
			padding: 0.75rem 1.5rem;
			background-color: #4a90e2;
			/* Color azul que coincide con tu diseño */
			color: white;
			border: none;
			border-radius: 0.375rem;
			font-size: 0.875rem;
			cursor: pointer;
			transition: background-color 0.2s ease;
		}

		#addMaterialBtn:hover {
			background-color: #357abd;
			/* Un tono más oscuro al hover */
		}

		/* Responsive design */
		@media (max-width: 768px) {
			.search-container {
				flex-direction: column;
				padding: 1rem;
			}

			#searchInput,
			#searchType,
			#addMaterialBtn {
				width: 100%;
				min-width: unset;
			}

			/* Contenedor principal de la tabla */
			.table-container {
				width: 100%;
				overflow-x: auto;
				margin: 1rem auto;
				padding: 0 1rem;
				max-width: 1200px;
			}

			/* Estilos base de la tabla */
			table {
				width: 100%;
				border-collapse: collapse;
				font-family: Arial, sans-serif;
				box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
				min-width: 800px;
				/* Asegura que la tabla tenga un ancho mínimo */
			}

			/* Estilos para el encabezado */
			thead {
				background-color: #f8f9fa;
				border-bottom: 2px solid #dee2e6;
			}

			th {
				padding: 1rem;
				text-align: left;
				color: #495057;
				font-weight: 600;
				text-transform: uppercase;
				font-size: 0.9em;
				white-space: nowrap;
			}

			/* Estilos para el cuerpo de la tabla */
			td {
				padding: 1rem;
				color: #212529;
				border-bottom: 1px solid #e9ecef;
			}

			/* Estilos para filas alternas */
			tbody tr:nth-child(even) {
				background-color: #f8f9fa;
			}

			tbody tr:hover {
				background-color: #f1f3f5;
				transition: background-color 0.3s ease;
			}

			/* Estilos para los botones de acción */
			.action-btn {
				padding: 0.5rem 1rem;
				background-color: #4a90e2;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				transition: background-color 0.2s ease;
			}

			.action-btn:hover {
				background-color: #357abd;
			}

			/* Responsive para móviles */
			@media screen and (max-width: 768px) {
				.table-container {
					padding: 0.5rem;
				}

				/* Hacer que la tabla se pueda scrollear horizontalmente */
				table {
					display: block;
					overflow-x: auto;
					white-space: nowrap;
				}

				th,
				td {
					padding: 0.75rem;
				}

				/* Opcional: Hacer que algunas columnas sean más pequeñas en móvil */
				th:nth-child(3),
				/* Stock Mínimo */
				td:nth-child(3),
				th:nth-child(4),
				/* Unidad de Medida */
				td:nth-child(4) {
					max-width: 100px;
				}
			}

			/* Mensaje de no resultados */
			.no-results {
				text-align: center;
				padding: 2rem;
				color: #666;
				font-style: italic;
			}

			/* Estilos para el scrollbar horizontal en la tabla (opcional) */
			.table-container::-webkit-scrollbar {
				height: 8px;
			}

			.table-container::-webkit-scrollbar-track {
				background: #f1f1f1;
			}

			.table-container::-webkit-scrollbar-thumb {
				background: #888;
				border-radius: 4px;
			}

			.table-container::-webkit-scrollbar-thumb:hover {
				background: #555;
			}
		}
	</style>
</head>

<body>
	<!-- Notifications area -->
	<section class="full-width container-notifications">
		<div class="full-width container-notifications-bg btn-Notification"></div>
		<section class="NotificationArea">
			<div class="full-width text-center NotificationArea-title tittles">Notifications <i
					class="zmdi zmdi-close btn-Notification"></i></div>
			<a href="#" class="Notification" id="notifation-unread-1">
				<div class="Notification-icon"><i class="zmdi zmdi-accounts-alt bg-info"></i></div>
				<div class="Notification-text">
					<p>
						<i class="zmdi zmdi-circle"></i>
						<strong>New User Registration</strong>
						<br>
						<small>Just Now</small>
					</p>
				</div>
				<div class="mdl-tooltip mdl-tooltip--left" for="notifation-unread-1">Notification as UnRead</div>
			</a>
			<a href="#" class="Notification" id="notifation-read-1">
				<div class="Notification-icon"><i class="zmdi zmdi-cloud-download bg-primary"></i></div>
				<div class="Notification-text">
					<p>
						<i class="zmdi zmdi-circle-o"></i>
						<strong>New Updates</strong>
						<br>
						<small>30 Mins Ago</small>
					</p>
				</div>
				<div class="mdl-tooltip mdl-tooltip--left" for="notifation-read-1">Notification as Read</div>
			</a>
			<a href="#" class="Notification" id="notifation-unread-2">
				<div class="Notification-icon"><i class="zmdi zmdi-upload bg-success"></i></div>
				<div class="Notification-text">
					<p>
						<i class="zmdi zmdi-circle"></i>
						<strong>Archive uploaded</strong>
						<br>
						<small>31 Mins Ago</small>
					</p>
				</div>
				<div class="mdl-tooltip mdl-tooltip--left" for="notifation-unread-2">Notification as UnRead</div>
			</a>
			<a href="#" class="Notification" id="notifation-read-2">
				<div class="Notification-icon"><i class="zmdi zmdi-mail-send bg-danger"></i></div>
				<div class="Notification-text">
					<p>
						<i class="zmdi zmdi-circle-o"></i>
						<strong>New Mail</strong>
						<br>
						<small>37 Mins Ago</small>
					</p>
				</div>
				<div class="mdl-tooltip mdl-tooltip--left" for="notifation-read-2">Notification as Read</div>
			</a>
			<a href="#" class="Notification" id="notifation-read-3">
				<div class="Notification-icon"><i class="zmdi zmdi-folder bg-primary"></i></div>
				<div class="Notification-text">
					<p>
						<i class="zmdi zmdi-circle-o"></i>
						<strong>Folder delete</strong>
						<br>
						<small>1 hours Ago</small>
					</p>
				</div>
				<div class="mdl-tooltip mdl-tooltip--left" for="notifation-read-3">Notification as Read</div>
			</a>
		</section>
	</section>
	<!-- navLateral -->
	<section class="full-width navLateral">
		<div class="full-width navLateral-bg btn-menu"></div>
		<div class="full-width navLateral-body">
			<div class="full-width navLateral-body-logo text-center tittles">
				<i class="zmdi zmdi-close btn-menu"></i> Grido Tech Advance
			</div>
			<figure class="full-width navLateral-body-tittle-menu">
				<div>
					<img src="assets/img/Emi (sin Fondo).png" alt="Avatar" class="img-responsive">
				</div>
				<figcaption>
					<span>
						Emiliano Di Noto<br>
						<small>Administrador</small>
					</span>
				</figcaption>
			</figure>
			<nav class="full-width">
				<ul class="full-width list-unstyle menu-principal">
					<li class="full-width">
						<a href="home.html" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-view-dashboard"></i>
							</div>
							<div class="navLateral-body-cr">
								Inicio
							</div>
						</a>
					</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a href="production.html" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-washing-machine"></i>
							</div>
							<div class="navLateral-body-cr">
								Declarar Producción
							</div>
						</a>
					</li>

					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a href="workOders.html" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-washing-machine"></i>
							</div>
							<div class="navLateral-body-cr">
								Ordenes de Trabajo
							</div>
						</a>
					</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">

						<a href="#!" class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-case"></i>
							</div>
							<div class="navLateral-body-cr">
								Materiales
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="company.html" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-balance"></i>
									</div>
									<div class="navLateral-body-cr">
										Materiales
									</div>
								</a>
							</li>
							<li class="full-width">
								<a href="providers.html" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-truck"></i>
									</div>
									<div class="navLateral-body-cr">
										Materiales Descartados
									</div>
								</a>
							</li>
							<li class="full-width">
								<a href="payments.html" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-card"></i>
									</div>
									<div class="navLateral-body-cr">
										Materiales Retenidos
									</div>
								</a>
							</li>
						</ul>
					</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a href="products.html" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-washing-machine"></i>
							</div>
							<div class="navLateral-body-cr">
								Productos
							</div>
						</a>
					</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a href="inventory.html" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-store"></i>
							</div>
							<div class="navLateral-body-cr">
								Inventario
							</div>
						</a>
					</li>
					<li class="full-width divider-menu-h"></li>
					<!-- <li class="full-width">
						<a href="sales.html" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-shopping-cart"></i>
							</div>
							<div class="navLateral-body-cr">
								Informes
							</div>
						</a>
					</li>
					<li class="full-width divider-menu-h"></li> -->
					<li class="full-width">
						<a href="#!" class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-face"></i>
							</div>
							<div class="navLateral-body-cr">
								Gestión de Usuarios
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="admin.html" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-account"></i>
									</div>
									<div class="navLateral-body-cr">
										Administradores
									</div>
								</a>
							</li>
							<li class="full-width">
								<a href="client.html" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-accounts"></i>
									</div>
									<div class="navLateral-body-cr">
										Usuarios
									</div>
								</a>
							</li>
						</ul>
					</li>
					<li class="full-width">
						<a href="#!" class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-wrench"></i>
							</div>
							<div class="navLateral-body-cr">
								Configuración
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="#!" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-widgets"></i>
									</div>
									<div class="navLateral-body-cr">
										Opción 1
									</div>
								</a>
							</li>
							<li class="full-width">
								<a href="#!" class="full-width">
									<div class="navLateral-body-cl">
										<i class="zmdi zmdi-widgets"></i>
									</div>
									<div class="navLateral-body-cr">
										Opción 2
									</div>
								</a>
							</li>
						</ul>
					</li>
				</ul>
			</nav>
		</div>
	</section>
	<!-- pageContent -->
	<section class="full-width pageContent">
		<!-- navBar -->
		<div class="full-width navBar">
			<div class="full-width navBar-options">
				<i class="zmdi zmdi-swap btn-menu" id="btn-menu"></i>
				<h5 style="text-align: center;">ALMACEN PRODUCCION - MOVIMIENTOS</h5>
				<div class="mdl-tooltip" for="btn-menu">Hide / Show MENU</div>
				<nav class="navBar-options-list">
					<ul class="list-unstyle">
						<li class="btn-Notification" id="notifications">
							<i class="zmdi zmdi-notifications"></i>
							<div class="mdl-tooltip" for="notifications">Notifications</div>
						</li>
						<li class="btn-exit" id="btn-exit">
							<i class="zmdi zmdi-power"></i>
							<div class="mdl-tooltip" for="btn-exit">LogOut</div>
						</li>
						<li class="text-condensedLight noLink"><small>Emiliano Di Noto</small></li>
						<li class="noLink">
							<figure>
								<img src="assets/img/Emi (sin Fondo).png" alt="Avatar" class="img-responsive">
							</figure>
						</li>
					</ul>
				</nav>
			</div>
		</div>
		<div class="search-container">
			<input type="text" id="searchInput" placeholder="Buscar...">
			<select id="searchType">
				<option value="all">Buscar en Todo</option>
				<option value="codigo">Código</option>
				<option value="nombre">Nombre</option>
			</select>
		</div>

		<div class="filter-container">
			<label for="countryFilter">Filtrar por:</label>
			<select id="countryFilter">
				<option value="all">Todos los Países</option>
				<option value="argentina">Argentina</option>
				<option value="peru">Perú</option>
				<option value="uruguay">Uruguay</option>
				<option value="chile">Chile</option>
				<option value="paraguay">Paraguay</option>
			</select>
			<button id="filterButton" class="btn btn-primary">Filtrar</button>
		</div>

		</div>

		<div class="table-container">
			<table width="95%">
				<thead>
					<tr>
						<th><span class="las la-sort"></span>FECHA</th>
						<th><span class="las la-sort"></span>TURNO</th>
						<th><span class="las la-sort"></span>RESPONSABLE</th>
						<th><span class="las la-sort"></span>OT</th>
						<th><span class="las la-sort"></span>MATERIAL</th>
						<th><span class="las la-sort"></span>CANTIDAD</th>
						<th><span class="las la-sort"></span>PROVEEDOR</th>
						<th><span class="las la-sort"></span>LOTE</th>
						<th><span class="las la-sort"></span>TIPO DE MOVIMIENTO</th>
					</tr>
				</thead>
				<tbody>

				</tbody>
			</table>
		</div>
		</div>
		</div>
		</main>
		</div>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- Nav desplegable-->

		<script type="text/javascript">
			$(".nav").click(function () {
				$("#mySidenav").css("width", "70px");
				$("#main").css("margin-left", "70px");
				$(".logo").css("visibility", "hidden");
				$(".logo span").css("visibility", "visible");
				$(".logo span").css("margin-left", "-10px");
				$(".icon-a").css("visibility", "hidden");
				$(".icons").css("visibility", "visible");
				$(".icons").css("margin-left", "-8px");
				$(".nav").css("display", "none");
				$(".nav2").css("display", "block");
			});

			$(".nav2").click(function () {
				$("#mySidenav").css("width", "300px");
				$("#main").css("margin-left", "300px");
				$(".logo").css("visibility", "visible");
				$(".logo span").css("visibility", "visible");
				$(".icon-a").css("visibility", "visible");
				$(".icons").css("visibility", "visible");
				$(".nav").css("display", "block");
				$(".nav2").css("display", "none");
			});
		</script>

		<script>

			function formatDate(dateString) {
				const date = new Date(dateString);
				const day = String(date.getDate()).padStart(2, '0');
				const month = String(date.getMonth() + 1).padStart(2, '0');
				const year = date.getFullYear();

				return `${day}-${month}-${year}`;
			}

			function Get() {
				fetch("http://localhost:63152/api/ProductionStore/GetAllProductionStore")
					.then((response) => response.json())
					.then((data) => {
						const tbody = document.querySelector(`tbody`);

						
						data.forEach((o) => {
							const fechaElaboracion = formatDate(o.FECHAMOV);
							let _tr = `<tr>
						  <td data-label="FECHA">${o.FECHAMOV}</td>
						  <td data-label="TURNO">${o.TURNO}</td>
						  <td data-label="RESPONSABLE">${o.RESPONSABLE}</td>
						<td data-label="OT">${o.OT}</td>
						<td data-label="MATERIAL">${o.MATERIAL}</td>
						  <td data-label="CANTIDAD">${o.CANTIDAD}</td>
						  <td data-label="PROVEEDOR">${o.PROVEEDOR}</td>
						  <td data-label="LOTE">${o.LOTE}</td>
						  <td data-label="TIPO DE MOVIMIENTO">${o.TIPOMOV}</td>
					  </tr>`;

							tbody.innerHTML += _tr;
						});
					});
			}
			Get();

			// Función para filtrar los productos
			function filterProducts(searchValue, searchType) {
				const tbody = document.querySelector('tbody');
				const rows = tbody.getElementsByTagName('tr');

				// Convertir el valor de búsqueda a minúsculas para hacer la búsqueda insensible a mayúsculas
				searchValue = searchValue.toLowerCase();

				for (let row of rows) {
					let codigo = row.cells[0].textContent.toLowerCase();
					let nombre = row.cells[1].textContent.toLowerCase();
					let descripcion = row.cells[2].textContent.toLowerCase();
					let showRow = false;

					switch (searchType) {
						case 'codigo':
							showRow = codigo.includes(searchValue);
							break;
						case 'nombre':
							showRow = nombre.includes(searchValue);
							break;
						case 'all':
							showRow = codigo.includes(searchValue) ||
								nombre.includes(searchValue) ||
								descripcion.includes(searchValue);
							break;
						default:
							showRow = true;
					}

					row.style.display = showRow ? '' : 'none';
				}
			}

			// Función para inicializar los event listeners
			function initializeSearch() {
				const searchInput = document.getElementById('searchInput');
				const searchType = document.getElementById('searchType');

				// Event listener para el input de búsqueda
				searchInput.addEventListener('input', function () {
					filterProducts(this.value, searchType.value);
				});

				// Event listener para el cambio de tipo de búsqueda
				searchType.addEventListener('change', function () {
					filterProducts(searchInput.value, this.value);
				});
			}

			// Modificar la función Get para inicializar la búsqueda después de cargar los datos
			function Get() {
				fetch("http://localhost:63152/api/ProductionStore/GetAllProductionStore")
					.then((response) => response.json())
					.then((data) => {
						const tbody = document.querySelector('tbody');
						tbody.innerHTML = ''; // Limpiar tbody antes de agregar nuevos datos

						data.forEach((o) => {
							const fechaElaboracion = formatDate(o.FECHAMOV);
							let _tr = `<tr>
                    <td data-label="FECHA">${o.FECHAMOV}</td>
						  <td data-label="TURNO">${o.TURNO}</td>
						  <td data-label="RESPONSABLE">${o.RESPONSABLE}</td>
						<td data-label="OT">${o.OT}</td>
						<td data-label="MATERIAL">${o.MATERIAL}</td>
						  <td data-label="CANTIDAD">${o.CANTIDAD}</td>
						  <td data-label="PROVEEDOR">${o.PROVEEDOR}</td>
						  <td data-label="LOTE">${o.LOTE}</td>
						  <td data-label="TIPO DE MOVIMIENTO">${o.TIPOMOV}</td>
                  </tr>`;
							tbody.innerHTML += _tr;
						});

						// Inicializar la búsqueda después de cargar los datos
						initializeSearch();
					})
					.catch(error => {
						console.error('Error al cargar los productos:', error);
					});
			}

			// Llamar a Get cuando se carga la página
			document.addEventListener('DOMContentLoaded', Get);

			// Función para filtrar productos por texto
			function filterProducts(searchValue, searchType) {
				const tbody = document.querySelector('tbody');
				const rows = tbody.getElementsByTagName('tr');

				searchValue = searchValue.toLowerCase();

				for (let row of rows) {
					let codigo = row.cells[0].textContent.toLowerCase();
					let nombre = row.cells[1].textContent.toLowerCase();
					let descripcion = row.cells[2].textContent.toLowerCase();
					let showRow = false;

					switch (searchType) {
						case 'codigo':
							showRow = codigo.includes(searchValue);
							break;
						case 'nombre':
							showRow = nombre.includes(searchValue);
							break;
						case 'all':
							showRow = codigo.includes(searchValue) ||
								nombre.includes(searchValue) ||
								descripcion.includes(searchValue);
							break;
						default:
							showRow = true;
					}

					row.style.display = showRow ? '' : 'none';
				}
			}

			// Función para filtrar por país
			function filterByCountry() {
				const countryFilter = document.getElementById('countryFilter').value;
				const tbody = document.querySelector('tbody');
				const rows = tbody.getElementsByTagName('tr');

				// Si hay texto en el buscador, primero aplicamos ese filtro
				const searchInput = document.getElementById('searchInput');
				const searchType = document.getElementById('searchType');
				if (searchInput.value) {
					filterProducts(searchInput.value, searchType.value);
				}

				// Luego aplicamos el filtro de país
				for (let row of rows) {
					// Solo procesamos las filas que están visibles después del filtro de búsqueda
					if (row.style.display !== 'none') {
						let nombre = row.cells[1].textContent.toLowerCase(); // Cambiamos a nombre en lugar de código
						let showRow = false;

						switch (countryFilter) {
							case 'Argentina':
								showRow = nombre.includes('GRIDO');
								break;
							case 'Paraguay':
								showRow = nombre.includes('EXPO');
								break;
							case 'Peru':
								showRow = nombre.includes('PE');
								break;
							case 'Uruguay':
								showRow = nombre.includes('UY');
								break;
							case 'Chile':
								showRow = nombre.includes('CL');
								break;
							case 'all':
								showRow = true;
								break;
						}

						row.style.display = showRow ? '' : 'none';
					}
				}

				// Mostrar mensaje si no hay resultados
				const visibleRows = [...rows].filter(row => row.style.display !== 'none');
				const noResultsMessage = document.getElementById('noResultsMessage');

				if (visibleRows.length === 0) {
					if (!noResultsMessage) {
						const message = document.createElement('div');
						message.id = 'noResultsMessage';
						message.className = 'no-results';
						message.textContent = 'No se encontraron productos para los filtros seleccionados';
						tbody.parentNode.insertBefore(message, tbody.nextSibling);
					}
				} else if (noResultsMessage) {
					noResultsMessage.remove();
				}
			}

			// Función para inicializar los event listeners
			function initializeSearch() {
				const searchInput = document.getElementById('searchInput');
				const searchType = document.getElementById('searchType');
				const filterButton = document.getElementById('filterButton');

				// Event listener para el input de búsqueda
				searchInput.addEventListener('input', function () {
					filterProducts(this.value, searchType.value);
				});

				// Event listener para el cambio de tipo de búsqueda
				searchType.addEventListener('change', function () {
					if (searchInput.value) {
						filterProducts(searchInput.value, this.value);
					}
				});

				// Event listener para el botón de filtrar
				filterButton.addEventListener('click', filterByCountry);
			}

			// Modificar la función Get para inicializar la búsqueda después de cargar los datos
			function Get() {
				fetch("http://localhost:63152/api/ProductionStore/GetAllProductionStore")
					.then((response) => response.json())
					.then((data) => {
						const tbody = document.querySelector('tbody');
						tbody.innerHTML = ''; // Limpiar tbody antes de agregar nuevos datos

						data.forEach((o) => {
							const fechaElaboracion = formatDate(o.FECHAMOV);
							let _tr = `<tr>
                            <td data-label="FECHA">${o.FECHAMOV}</td>
						  <td data-label="TURNO">${o.TURNO}</td>
						  <td data-label="RESPONSABLE">${o.RESPONSABLE}</td>
						<td data-label="OT">${o.OT}</td>
						<td data-label="MATERIAL">${o.MATERIAL}</td>
						  <td data-label="CANTIDAD">${o.CANTIDAD}</td>
						  <td data-label="PROVEEDOR">${o.PROVEEDOR}</td>
						  <td data-label="LOTE">${o.LOTE}</td>
						  <td data-label="TIPO DE MOVIMIENTO">${o.TIPOMOV}</td>
                          </tr>`;
							tbody.innerHTML += _tr;
						});

						// Inicializar la búsqueda después de cargar los datos
						initializeSearch();
					})
					.catch(error => {
						console.error('Error al cargar los productos:', error);
					});
			}

			// Llamar a Get cuando se carga la página
			document.addEventListener('DOMContentLoaded', Get);

		</script>

</body>

</html>