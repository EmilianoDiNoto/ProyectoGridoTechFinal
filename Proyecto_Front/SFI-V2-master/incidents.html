<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Production</title>
	<link rel="stylesheet" href="css/sweetalert2.css">
	<link rel="stylesheet" href="css/material.min.css">
	<link rel="stylesheet" href="css/material-design-iconic-font.min.css">
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/productionstore.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- SweetAlert2 (una sola versión) -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- Tus otros scripts locales -->
	<script src="js/material.min.js"></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/production_datatable.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">


	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>



	<!-- Chart.js -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.11.2.min.js"><\/script>')</script>
	<script src="js/material.min.js"></script>
	<script src="js/sweetalert2.min.js"></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/menuControl.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

	<!-- BOOTSTRAP -->
	<link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

	<!-- DataTables CSS -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css">
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css">
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">

	<!-- DataTables JS -->
	<script type="text/javascript" src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.js"></script>
	<script type="text/javascript"
		src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

	<!--Libreria del Calendario Domingo a Sabado-->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

</head>

<body>
	<!-- Sidebar -->
	<aside id="sidebar">
		<div class="d-flex">
			<button class="toggle-btn" type="button">
				<i class="lni lni-grid-alt"></i>
			</button>
			<div class="sidebar-logo">
				<a href="#">Grido Tech Advance</a>
			</div>
		</div>
		<ul class="sidebar-nav">
			<li class="sidebar-item">
				<a href="home.html" class="sidebar-link">
					<i class="zmdi zmdi-view-dashboard"></i>
					<span>Inicio</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="production.html" class="sidebar-link">
					<i class="zmdi zmdi-washing-machine"></i>
					<span>Declarar Producción</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="productionTable.html" class="sidebar-link">
					<i class="zmdi zmdi-washing-machine"></i>
					<span>Producción Confirmada</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="workOders.html" class="sidebar-link">
					<i class="zmdi zmdi-assignment"></i>
					<span>Órdenes de Trabajo</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="#" class="sidebar-link collapsed has-dropdown" data-bs-toggle="collapse"
					data-bs-target="#materials" aria-expanded="false" aria-controls="materials">
					<i class="zmdi zmdi-case"></i>
					<span>Materiales</span>
				</a>
				<ul id="materials" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
					<li class="sidebar-item">
						<a href="materials.html" class="sidebar-link">Materiales</a>
					</li>
					<li class="sidebar-item">
						<a href="providers.html" class="sidebar-link">Materiales Descartados</a>
					</li>
					<li class="sidebar-item">
						<a href="payments.html" class="sidebar-link">Materiales Retenidos</a>
					</li>
				</ul>
			</li>
			<li class="sidebar-item">
				<a href="products.html" class="sidebar-link">
					<i class="zmdi zmdi-store"></i>
					<span>Productos</span>
				</a>
			</li>
			<li class="sidebar-item">
				<a href="productStore.html" class="sidebar-link">
					<i class="zmdi zmdi-store"></i>
					<span>Almacén</span>
				</a>
			</li>
		</ul>
	</aside>
	<section>
		<div class="container">
			<table id="example" class="display" style="width:100%">
				<thead>
					<tr>
						<th style="width: 10%;">OT</th>
						<th style="width: 10%;">FECHA</th>
						<th style="width: 10%;">HS INICIO</th>
						<th style="width: 10%;">HS FIN</th>
						<th style="width: 50%;">DETALLE</th>
						<th style="width: 20%;">TALLER</th>
						<th style="width: 20%;">DURACION</th>
					</tr>
				</thead>
				<tbody>
					<!-- Los datos se insertarán aquí -->
				</tbody>
			</table>
			<div id="progress-bars" class="mt-4">
				<h3>Duración por Taller</h3>
				<div class="progress">
					<div class="progress-bar progress-bar-striped" id="mecanico" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">MECANICO</div>
				</div>
				<div class="progress">
					<div class="progress-bar progress-bar-striped bg-success" id="calidad" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">CALIDAD</div>
				</div>
				<div class="progress">
					<div class="progress-bar progress-bar-striped bg-info" id="abastecimiento" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">ABASTECIMIENTO</div>
				</div>
				<div class="progress">
					<div class="progress-bar progress-bar-striped bg-warning" id="servicios" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">SERVICIOS EXTERNOS</div>
				</div>
				<div class="progress">
					<div class="progress-bar progress-bar-striped bg-danger" id="produccion" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">PRODUCCION</div>
				</div>
			</div>
		</div>
	</section>
	</section>
	<script>
		$(document).ready(function () {
			// Hacer la solicitud a la API
			$.ajax({
				url: 'http://localhost:63152/api/Unplanned/GetAllUnplanned',
				method: 'GET',
				dataType: 'json',
				success: function (data) {
					// Llenar la tabla con los datos
					var tableBody = $('#example tbody');
					data.forEach(function (incidente) {
						var row = `<tr>
							<td>${incidente.OT}</td>
							<td>${new Date(incidente.FECHA).toLocaleDateString()}</td>
							<td>${incidente.HSINICIO}</td>
							<td>${incidente.HSFIN}</td>
							<td>${incidente.DETALLE}</td>
							<td>${incidente.TALLER}</td>
							<td>${incidente.DURACION}</td>
						</tr>`;
						tableBody.append(row);
					});

					// Inicializar DataTable
					new DataTable('#example', {
						paging: false,
						scrollCollapse: true,
						scrollY: '600px'
					});
				},
				error: function (xhr, status, error) {
					console.error('Error al obtener los datos:', error);
				}
			});
		});
	</script>

	<!-- Librerías necesarias -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- CSS de DataTables -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">

	<!-- JS de DataTables -->
	<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>

	<!-- Archivo JavaScript separado -->
	<script src="js/production1.js"></script>

</body>

</html>