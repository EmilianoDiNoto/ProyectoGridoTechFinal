<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista de Usuarios</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f5f5f5;
      }
      .user-list-container {
        width: 100%;
        max-width: 800px;
        padding: 20px;
        background-color: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
      }
      h2 {
        text-align: center;
        margin-bottom: 20px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
      }
      table,
      th,
      td {
        border: 1px solid #ddd;
      }
      th,
      td {
        padding: 12px;
        text-align: left;
      }
      th {
        background-color: #007bff;
        color: #fff;
      }
      .actions button {
        margin-right: 5px;
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        color: #fff;
      }
      .view {
        background-color: #28a745;
      }
      .edit {
        background-color: #007bff;
      }
      .delete {
        background-color: #dc3545;
      }
      .update {
        background-color: #ffc107;
        display: block;
        margin: 20px auto 0;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        color: #fff;
        cursor: pointer;
      }
      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
      }
      .pagination button {
        margin: 0 5px;
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        background-color: #007bff;
        color: #fff;
      }
      .pagination button.disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }
      .page-number {
        margin: 0 5px;
        padding: 5px 10px;
        background-color: #f0f0f0;
        color: #000;
        border-radius: 4px;
      }
      .page-number.active {
        background-color: #007bff;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="user-list-container">
      <h2>Lista de Usuarios</h2>
      <table>
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Último Inicio de Sesión</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="userTableBody">
          <!-- Filas de usuario generadas por JavaScript -->
        </tbody>
      </table>
      <button class="update" onclick="updateAllUsers()">
        Actualizar Todos
      </button>
      <div class="pagination">
        <button id="prevBtn" onclick="changePage(-1)">Anterior</button>
        <div id="pageNumbers"></div>
        <button id="nextBtn" onclick="changePage(1)">Siguiente</button>
      </div>
    </div>

    <script>
      // Datos de ejemplo de usuarios
      const users = [
        {
          name: "Juan Pérez",
          role: "Administrador",
          lastLogin: "2023-10-21 15:30",
        },
        { name: "María García", role: "Editor", lastLogin: "2023-10-20 10:15" },
        {
          name: "Luis Fernández",
          role: "Visualizador",
          lastLogin: "2023-10-19 17:45",
        },
        {
          name: "Ana López",
          role: "Administrador",
          lastLogin: "2023-10-18 14:20",
        },
        { name: "Carlos Ruiz", role: "Editor", lastLogin: "2023-10-17 09:10" },
        {
          name: "Sofía Torres",
          role: "Visualizador",
          lastLogin: "2023-10-16 08:50",
        },
        {
          name: "Pedro Sánchez",
          role: "Administrador",
          lastLogin: "2023-10-15 11:00",
        },
        {
          name: "Lucía Martínez",
          role: "Editor",
          lastLogin: "2023-10-14 13:45",
        },
      ];

      let currentPage = 0;
      const rowsPerPage = 7; // Cambiado a 5 filas por página

      // Función para mostrar la lista de usuarios
      function displayUsers() {
        const userTableBody = document.getElementById("userTableBody");
        userTableBody.innerHTML = ""; // Limpiar el contenido actual

        const start = currentPage * rowsPerPage;
        const end = start + rowsPerPage;
        const paginatedUsers = users.slice(start, end);

        paginatedUsers.forEach((user, index) => {
          const row = document.createElement("tr");

          row.innerHTML = `
                <td>${user.name}</td>
                <td>${user.role}</td>
                <td>${user.lastLogin}</td>
                <td class="actions">
                    <button class="view" onclick="viewUser(${start + index})">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="edit" onclick="editUser(${start + index})">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="delete" onclick="deleteUser(${
                      start + index
                    })">
                        <i class="fas fa-trash"></i>
                    </button>
                </td>
            `;

          userTableBody.appendChild(row);
        });

        // Actualizar el estado de los botones de paginación
        document
          .getElementById("prevBtn")
          .classList.toggle("disabled", currentPage === 0);
        document
          .getElementById("nextBtn")
          .classList.toggle("disabled", end >= users.length);
        displayPageNumbers();
      }

      function displayPageNumbers() {
        const pageNumbersContainer = document.getElementById("pageNumbers");
        pageNumbersContainer.innerHTML = ""; // Limpiar el contenido actual

        const totalPages = Math.ceil(users.length / rowsPerPage);
        for (let i = 0; i < totalPages; i++) {
          const pageButton = document.createElement("span");
          pageButton.innerText = i + 1; // Mostrar el número de página
          pageButton.className =
            "page-number" + (i === currentPage ? " active" : "");
          pageButton.onclick = () => {
            currentPage = i;
            displayUsers();
          };
          pageNumbersContainer.appendChild(pageButton);
        }
      }

      // Funciones de acciones de usuario
      function viewUser(index) {
        alert(
          `Detalles de ${users[index].name}:\nRol: ${users[index].role}\nÚltimo inicio de sesión: ${users[index].lastLogin}`
        );
      }

      function updateAllUsers() {
        alert("Todos los usuarios han sido actualizados.");
      }

      function editUser(index) {
        const newName = prompt("Ingrese el nuevo nombre:", users[index].name);
        if (newName) {
          users[index].name = newName;
          displayUsers();
        }
      }

      function deleteUser(index) {
        if (
          confirm(`¿Está seguro de que desea eliminar a ${users[index].name}?`)
        ) {
          users.splice(index, 1);
          displayUsers();
        }
      }

      function changePage(direction) {
        currentPage += direction;
        displayUsers();
      }

      // Inicializar la lista de usuarios al cargar la página
      document.addEventListener("DOMContentLoaded", displayUsers);
    </script>
  </body>
</html>
